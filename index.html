<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üõí Sistema de Vendas</title>

<script src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js"></script>

<style>
:root {
  --primary:#3498db;
  --danger:#e74c3c;
  --success:#2ecc71;
  --dark:#2c3e50;
}
* { box-sizing:border-box; font-family:Arial, Helvetica, sans-serif; }
body { margin:0; background:#f4f6f8; }

.header {
  background:var(--dark);
  color:#fff;
  padding:15px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.container { display:flex; height:calc(100vh - 60px); }

.sidebar {
  width:300px;
  background:#fff;
  padding:15px;
  border-right:1px solid #ddd;
  overflow:auto;
}

.cart {
  flex:1;
  padding:15px;
  display:flex;
  flex-direction:column;
}

.product-item {
  padding:10px;
  border-bottom:1px solid #eee;
  cursor:pointer;
}
.product-item:hover { background:#f0f0f0; }

.cart-item {
  display:flex;
  justify-content:space-between;
  padding:10px;
  border-bottom:1px solid #eee;
}

.btn {
  padding:10px;
  border:none;
  border-radius:6px;
  cursor:pointer;
  font-weight:bold;
}
.btn-primary { background:var(--primary); color:#fff; }
.btn-danger { background:var(--danger); color:#fff; }

.login {
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:linear-gradient(135deg,#1a2a6c,#2c3e50);
}
.login-box {
  background:#fff;
  padding:30px;
  border-radius:10px;
  width:300px;
  text-align:center;
}
.login-box input, .login-box select {
  width:100%;
  padding:10px;
  margin-bottom:10px;
}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="login-screen" class="login">
  <div class="login-box">
    <h2>üîê Login</h2>
    <select id="login-user">
      <option value="">Usu√°rio</option>
      <option value="admin">Administrador</option>
      <option value="operador">Operador</option>
    </select>
    <input type="password" id="login-pass" placeholder="Senha">
    <button class="btn btn-primary" id="btn-login">Entrar</button>
    <p style="font-size:12px;">Admin: java1814<br>Operador: operador123</p>
  </div>
</div>

<!-- SISTEMA -->
<div id="app" style="display:none;">
  <div class="header">
    <div>üõí Sistema de Vendas</div>
    <button class="btn btn-danger" id="btn-logout">Sair</button>
  </div>

  <div class="container">
    <div class="sidebar">
      <input id="busca" placeholder="Buscar produto..." style="width:100%;padding:10px;">
      <div id="produtos"></div>
    </div>

    <div class="cart">
      <h2>Carrinho</h2>
      <div id="carrinho"></div>
      <h3>Total: <span id="total">R$ 0,00</span></h3>
      <button class="btn btn-danger" id="btn-cancelar">Cancelar</button>
      <button class="btn btn-primary" id="btn-finalizar">Finalizar</button>
    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {

let carrinho = [];

function moeda(v){
  return v.toLocaleString('pt-BR',{style:'currency',currency:'BRL'});
}

function initDB(){
  if(!localStorage.getItem('db')){
    localStorage.setItem('db', JSON.stringify({
      usuarios:[
        {login:'admin',senha:'java1814'},
        {login:'operador',senha:'operador123'}
      ],
      produtos:[
        {id:1,desc:'Heineken',preco:8},
        {id:2,desc:'Budweiser',preco:5},
        {id:3,desc:'Amstel',preco:5},
        {id:4,desc:'Itaipava',preco:4},
        {id:5,desc:'Schin',preco:3.5},
        {id:6,desc:'Coca-Cola Lata',preco:5},
        {id:7,desc:'√Ågua Mineral',preco:2},
        {id:8,desc:'Halls',preco:3},
        {id:9,desc:'Batata Frita',preco:7}
      ]
    }));
  }
}

function carregarProdutos(){
  const db = JSON.parse(localStorage.getItem('db'));
  const div = document.getElementById('produtos');
  div.innerHTML='';
  db.produtos.forEach(p=>{
    const el=document.createElement('div');
    el.className='product-item';
    el.innerHTML=`${p.desc} - ${moeda(p.preco)}`;
    el.onclick=()=>addCarrinho(p);
    div.appendChild(el);
  });
}

function addCarrinho(p){
  carrinho.push(p);
  renderCarrinho();
}

function renderCarrinho(){
  const div=document.getElementById('carrinho');
  let total=0;
  div.innerHTML='';
  carrinho.forEach(p=>{
    total+=p.preco;
    div.innerHTML+=`<div class="cart-item"><span>${p.desc}</span><span>${moeda(p.preco)}</span></div>`;
  });
  document.getElementById('total').innerText=moeda(total);
}

document.getElementById('btn-login').onclick=()=>{
  const u=document.getElementById('login-user').value;
  const s=document.getElementById('login-pass').value;
  const db=JSON.parse(localStorage.getItem('db'));
  if(db.usuarios.find(x=>x.login===u && x.senha===s)){
    document.getElementById('login-screen').style.display='none';
    document.getElementById('app').style.display='block';
    carregarProdutos();
  } else alert('Senha inv√°lida');
};

document.getElementById('btn-logout').onclick=()=>location.reload();
document.getElementById('btn-cancelar').onclick=()=>{carrinho=[];renderCarrinho();};
document.getElementById('btn-finalizar').onclick=()=>{
  if(!carrinho.length) return alert('Carrinho vazio');
  alert('Venda finalizada!');
  carrinho=[];renderCarrinho();
};

initDB();
});
</script>

</body>
</html>
